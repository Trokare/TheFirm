<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Vanilla Ideology Expanded - Memes and Structures</li>
    </mods>
    <match Class="PatchOperationSequence">
      <operations>
        <li Class="PatchOperationReplace">
          <xpath>/Defs/FactionDef[defName="TheFirm_FirmBranch"]/structureMemeWeights</xpath>
          <value>
            <structureMemeWeights>
              <VME_Structure_Corporate MayRequire="Ludeon.RimWorld.Ideology">1</VME_Structure_Corporate>
            </structureMemeWeights>
          </value>
        </li>
        <li Class="PatchOperationReplace">
          <xpath>/Defs/FactionDef[defName="TheFirm_FirmBranch"]/requiredMemes</xpath>
          <value>
            <requiredMemes>
              <li MayRequire="Ludeon.RimWorld.Ideology">VME_Trader</li>
              <li MayRequire="Ludeon.RimWorld.Ideology">Loyalist</li>
              <li MayRequire="Ludeon.RimWorld.Ideology">HumanPrimacy</li>
            </requiredMemes>
          </value>
        </li>
        <li Class="PatchOperationReplace">
          <xpath>/Defs/FactionDef[defName="TheFirm_FirmBranch"]/disallowedMemes</xpath>
          <value>
            <disallowedMemes>
              <li MayRequire="Ludeon.RimWorld.Ideology">Nudism</li>
              <li MayRequire="Ludeon.RimWorld.Ideology">NaturePrimacy</li>
              <li MayRequire="Ludeon.RimWorld.Ideology">VME_Egalitarian</li>
              <li MayRequire="Ludeon.RimWorld.Ideology">VME_Emancipation</li>
              <li MayRequire="Ludeon.RimWorld.Ideology">VME_Pacifist</li>
            </disallowedMemes>
          </value>
        </li>
      </operations>
    </match>
  </Operation>
</Patch>